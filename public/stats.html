<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YeMo-APIs | System Status</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        border: '#18181b',
                        background: '#ffffff',
                        surface: '#f4f4f5',
                        primary: '#3b82f6',
                        accent: '#8b5cf6',
                    },
                    boxShadow: {
                        'brutal': '4px 4px 0 0 #18181b',
                        'brutal-sm': '2px 2px 0 0 #18181b',
                    }
                }
            }
        }
    </script>
    <style>
        .neo-card {
            background: white;
            border: 1px solid #e4e4e7;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.2s;
        }

        .neo-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1), 0 4px 6px -2px rgba(59, 130, 246, 0.05);
        }

        .status-dot {
            height: 8px;
            width: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-online {
            background-color: #22c55e;
            box-shadow: 0 0 8px #22c55e;
        }

        .status-offline {
            background-color: #ef4444;
        }
    </style>
</head>

<body class="bg-gray-50 text-zinc-900 antialiased min-h-screen flex flex-col">

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu"
        class="fixed inset-0 bg-white/95 backdrop-blur-xl z-50 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col items-center justify-center space-y-8">
        <button onclick="toggleMenu()" class="absolute top-6 right-6 p-2 text-2xl hover:text-primary transition-colors">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <a href="/" onclick="toggleMenu()"
            class="text-3xl font-black tracking-tight hover:text-primary transition-colors">HOME</a>
        <a href="/stats" onclick="toggleMenu()"
            class="text-3xl font-black tracking-tight hover:text-primary transition-colors">STATS</a>
    </div>

    <!-- Navigation -->
    <nav class="sticky top-0 z-40 w-full bg-white border-b-2 border-border/10 backdrop-blur-md bg-white/80">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="/" class="flex-shrink-0 flex items-center gap-3 group cursor-pointer">
                    <div
                        class="w-10 h-10 bg-zinc-900 group-hover:bg-primary transition-colors text-white flex items-center justify-center rounded-lg font-black text-xl shadow-brutal-sm">
                        Y</div>
                    <div>
                        <h1 class="font-bold text-xl tracking-tight leading-none">YeMo<span
                                class="text-primary">STATS</span></h1>
                        <p class="text-[0.65rem] font-mono text-zinc-500 font-bold uppercase tracking-wider">System
                            Monitor</p>
                    </div>
                </a>

                <div class="hidden md:flex items-center gap-8">
                    <a href="/" class="text-sm font-bold hover:text-primary transition-colors">HOME</a>
                    <a href="/stats" class="text-sm font-bold text-primary">STATUS</a>
                </div>

                <div class="md:hidden">
                    <button onclick="toggleMenu()" class="p-2 text-xl text-zinc-900">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full space-y-8">

        <header class="mb-10" data-aos="fade-down">
            <h2 class="text-3xl font-black text-zinc-900 tracking-tight mb-2">System Overview</h2>
            <div class="flex items-center gap-3">
                <span id="global-status-indicator" class="status-dot status-online"></span>
                <span id="global-status-text" class="text-sm font-bold text-zinc-500 uppercase tracking-wide">All
                    Systems Operational</span>
            </div>
        </header>

        <!-- KPI Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" data-aos="fade-up">
            <div class="neo-card p-6 border-l-4 border-l-primary">
                <div class="flex justify-between items-start mb-4 opacity-60">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-zinc-500">Uptime</h3>
                    <i class="fa-solid fa-clock text-primary"></i>
                </div>
                <div id="uptime-text" class="text-2xl font-black font-mono tracking-tight text-zinc-900">--:--:--</div>
                <p class="text-xs text-zinc-500 mt-2 font-medium">Since last restart</p>
            </div>

            <div class="neo-card p-6 border-l-4 border-l-accent">
                <div class="flex justify-between items-start mb-4 opacity-60">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-zinc-500">Platform</h3>
                    <i class="fa-brands fa-linux text-accent"></i>
                </div>
                <div id="platform-text" class="text-2xl font-black tracking-tight text-zinc-900 truncate">Detecting...
                </div>
                <div id="distro-text" class="text-xs text-zinc-500 mt-2 font-bold uppercase">--</div>
            </div>

            <div class="neo-card p-6 border-l-4 border-l-yellow-500">
                <div class="flex justify-between items-start mb-4 opacity-60">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-zinc-500">CPU Load</h3>
                    <i class="fa-solid fa-microchip text-yellow-500"></i>
                </div>
                <div class="flex items-end gap-2">
                    <div id="cpu-text" class="text-4xl font-black tracking-tighter text-zinc-900">0%</div>
                </div>
                <div class="w-full bg-zinc-100 rounded-full h-1.5 mt-4 overflow-hidden">
                    <div id="cpu-bar" class="bg-yellow-500 h-1.5 rounded-full transition-all duration-500 w-0"></div>
                </div>
            </div>

            <div class="neo-card p-6 border-l-4 border-l-green-500">
                <div class="flex justify-between items-start mb-4 opacity-60">
                    <h3 class="text-xs font-bold uppercase tracking-wider text-zinc-500">Memory</h3>
                    <i class="fa-solid fa-memory text-green-500"></i>
                </div>
                <div class="flex items-end gap-2">
                    <div id="mem-text" class="text-4xl font-black tracking-tighter text-zinc-900">0%</div>
                </div>
                <div class="w-full bg-zinc-100 rounded-full h-1.5 mt-4 overflow-hidden">
                    <div id="mem-bar" class="bg-green-500 h-1.5 rounded-full transition-all duration-500 w-0"></div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8" data-aos="fade-up" data-aos-delay="100">
            <div class="neo-card p-6 bg-white">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-zinc-900">CPU Usage History</h3>
                        <p class="text-xs text-zinc-500">Real-time load average over last 60s</p>
                    </div>
                    <span class="p-2 bg-yellow-50 text-yellow-600 rounded-lg"><i
                            class="fa-solid fa-wave-square"></i></span>
                </div>
                <div id="cpuChart" class="w-full h-[300px]"></div>
            </div>

            <div class="neo-card p-6 bg-white">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="font-bold text-lg text-zinc-900">Memory Distribution</h3>
                        <p class="text-xs text-zinc-500">Physical RAM allocation</p>
                    </div>
                    <span class="p-2 bg-green-50 text-green-600 rounded-lg"><i class="fa-solid fa-chart-pie"></i></span>
                </div>
                <div id="memChart" class="w-full h-[300px] flex items-center justify-center"></div>
            </div>
        </div>

        <!-- System Details Table -->
        <div class="neo-card overflow-hidden" data-aos="fade-up" data-aos-delay="200">
            <div class="bg-zinc-50 border-b border-zinc-200 p-4 px-6 flex justify-between items-center">
                <h3 class="font-bold text-zinc-900 text-sm uppercase tracking-wide">Environment Specifications</h3>
                <span
                    class="text-xs bg-white border border-zinc-200 px-2 py-1 rounded font-mono font-bold text-zinc-500">NODE
                    v20.x</span>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center divide-x divide-zinc-100">
                    <div>
                        <p class="text-xs text-zinc-400 font-bold uppercase mb-1">Architecture</p>
                        <p id="spec-arch" class="font-mono font-bold text-zinc-700">x64</p>
                    </div>
                    <div>
                        <p class="text-xs text-zinc-400 font-bold uppercase mb-1">Cores</p>
                        <p id="spec-cores" class="font-mono font-bold text-zinc-700">--</p>
                    </div>
                    <div>
                        <p class="text-xs text-zinc-400 font-bold uppercase mb-1">Total RAM</p>
                        <p id="spec-ram" class="font-mono font-bold text-zinc-700">-- GB</p>
                    </div>
                    <div>
                        <p class="text-xs text-zinc-400 font-bold uppercase mb-1">Hostname</p>
                        <p id="spec-host" class="font-mono font-bold text-zinc-700 truncate px-2">--</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ once: true, duration: 800 });

        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            const isOpen = !menu.classList.contains('translate-x-full');
            if (isOpen) {
                menu.classList.add('translate-x-full');
            } else {
                menu.classList.remove('translate-x-full');
            }
        }

        function formatUptime(seconds) {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = Math.floor(seconds % 60);
            return `${h}h ${m}m ${s}s`;
        }

        /* Chart Config */
        const fontFamily = 'Plus Jakarta Sans, sans-serif';

        const cpuOptions = {
            series: [{ name: 'Load', data: [] }],
            chart: {
                type: 'area',
                height: 300,
                fontFamily: fontFamily,
                animations: { enabled: true, easing: 'linear', dynamicAnimation: { speed: 1000 } },
                toolbar: { show: false },
                zoom: { enabled: false }
            },
            colors: ['#eab308'],
            stroke: { curve: 'smooth', width: 2 },
            fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0.05, stops: [0, 90, 100] } },
            dataLabels: { enabled: false },
            grid: { borderColor: '#f4f4f5', strokeDashArray: 4 },
            xaxis: { labels: { show: false }, axisBorder: { show: false }, axisTicks: { show: false } },
            yaxis: { max: 100, min: 0, tickAmount: 4 },
        };
        const cpuChart = new ApexCharts(document.querySelector("#cpuChart"), cpuOptions);
        cpuChart.render();

        const memOptions = {
            series: [0, 0],
            labels: ['Used', 'Free'],
            chart: { type: 'donut', height: 300, fontFamily: fontFamily },
            colors: ['#22c55e', '#f4f4f5'],
            stroke: { show: false },
            plotOptions: {
                pie: { donut: { size: '75%', labels: { show: true, total: { show: true, label: 'TOTAL RAM', fontWeight: 800, color: '#9ca3af' } } } }
            },
            dataLabels: { enabled: false },
            legend: { position: 'bottom', markers: { radius: 12 } },
            tooltip: { enabled: true }
        };
        const memChart = new ApexCharts(document.querySelector("#memChart"), memOptions);
        memChart.render();

        /* Realtime Updates */
        async function fetchStats() {
            try {
                const res = await fetch('/status');
                if (!res.ok) throw new Error('Network error');
                const data = await res.json();

                // Status Header
                document.getElementById('global-status-indicator').classList.remove('status-offline');
                document.getElementById('global-status-indicator').classList.add('status-online');
                document.getElementById('global-status-text').textContent = 'All Systems Operational';

                // Basic Metrics
                document.getElementById('uptime-text').textContent = formatUptime(data.uptime);

                if (data.os) {
                    document.getElementById('platform-text').textContent = data.os.platform.toUpperCase();
                    document.getElementById('distro-text').textContent = `${data.os.distro} ${data.os.release}`;
                    document.getElementById('spec-arch').textContent = data.os.arch;
                    document.getElementById('spec-host').textContent = data.os.hostname;
                }

                // CPU
                const cpu = Math.round(data.cpu);
                document.getElementById('cpu-text').textContent = cpu + "%";
                document.getElementById('cpu-bar').style.width = cpu + "%";
                cpuChart.appendData([{ data: [cpu] }]);

                // Memory
                const totalGB = (data.mem.total / 1073741824).toFixed(1);
                const usedGB = (data.mem.used / 1073741824).toFixed(1);
                const freeGB = (data.mem.free / 1073741824).toFixed(1);
                const usedPct = Math.round((data.mem.used / data.mem.total) * 100);

                document.getElementById('mem-text').textContent = usedPct + "%";
                document.getElementById('mem-bar').style.width = usedPct + "%";
                document.getElementById('spec-ram').textContent = totalGB + ' GB';

                memChart.updateSeries([parseFloat(usedGB), parseFloat(freeGB)]);
                memChart.updateOptions({
                    plotOptions: { pie: { donut: { labels: { total: { formatter: () => totalGB + " GB" } } } } }
                });

            } catch (error) {
                console.error(error);
                document.getElementById('global-status-indicator').classList.remove('status-online');
                document.getElementById('global-status-indicator').classList.add('status-offline');
                document.getElementById('global-status-text').textContent = 'Connection Lost';
            }
        }

        setInterval(fetchStats, 2000);
        fetchStats();

    </script>
</body>

</html>