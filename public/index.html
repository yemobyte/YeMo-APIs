<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YeMo-APIs | Developer Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: '#3b82f6',
                        accent: '#8b5cf6',
                    }
                }
            }
        }
    </script>
    <style>
        .endpoint-card {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .endpoint-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .endpoint-card:hover::before {
            transform: scaleX(1);
        }

        .endpoint-card:hover {
            transform: translateY(-4px);
            border-color: #3b82f6;
            box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.1), 0 10px 10px -5px rgba(59, 130, 246, 0.04);
        }

        .method-badge {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 0.7rem;
            padding: 0.35rem 0.75rem;
            border-radius: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .method-GET {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
        }

        .method-POST {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
        }

        .method-PUT {
            background: linear-gradient(135deg, #fef9c3 0%, #fde047 100%);
            color: #854d0e;
        }

        .method-DELETE {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f4f4f5;
        }

        ::-webkit-scrollbar-thumb {
            background: #d4d4d8;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1aa;
        }

        @media (max-width: 640px) {
            .hero-title {
                font-size: 2.5rem;
            }
        }

        .status-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        #endpoints {
            scroll-margin-top: 80px;
        }

        @media (max-width: 768px) {
            #endpoints {
                scroll-margin-top: 70px;
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-50 to-blue-50 text-zinc-900 antialiased min-h-screen flex flex-col">

    <div id="mobile-menu"
        class="fixed inset-0 bg-white/95 backdrop-blur-xl z-50 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col items-center justify-center space-y-8">
        <button onclick="toggleMenu()" class="absolute top-6 right-6 p-2 text-2xl hover:text-primary transition-colors"
            aria-label="Close menu">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <a href="/" onclick="toggleMenu()"
            class="text-3xl font-black tracking-tight hover:text-primary transition-colors">HOME</a>
        <a href="/stats" onclick="toggleMenu()"
            class="text-3xl font-black tracking-tight hover:text-primary transition-colors">STATS</a>
        <a href="https://github.com/yemobyte/YeMo-APIs" target="_blank" rel="noopener"
            class="text-3xl font-black tracking-tight hover:text-primary transition-colors">GITHUB</a>
    </div>

    <nav class="sticky top-0 z-40 w-full bg-white/80 border-b border-zinc-200 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0 flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center rounded-xl font-black text-xl shadow-lg">
                        Y</div>
                    <div>
                        <h1 class="font-bold text-xl tracking-tight leading-none">YeMo<span
                                class="text-primary">APIs</span></h1>
                        <p class="text-[0.65rem] font-mono text-zinc-500 font-bold uppercase tracking-wider">Developer
                            Hub</p>
                    </div>
                </div>

                <div class="hidden md:flex items-center gap-8">
                    <a href="/" class="text-sm font-bold hover:text-primary transition-colors">HOME</a>
                    <a href="/stats" class="text-sm font-bold hover:text-primary transition-colors">STATUS</a>
                    <a href="https://github.com/yemobyte/YeMo-APIs" target="_blank" rel="noopener"
                        class="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent text-white text-sm font-bold rounded-lg hover:shadow-lg transition-all">
                        <i class="fa-brands fa-github"></i> <span>Star</span>
                    </a>
                </div>

                <div class="md:hidden">
                    <button onclick="toggleMenu()" class="p-2 text-xl" aria-label="Toggle menu">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="relative overflow-hidden pt-12 pb-8 sm:pt-16 sm:pb-12 lg:pt-24 lg:pb-20">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 opacity-50"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative" data-aos="fade-up">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold mb-6 sm:mb-8 border border-primary/20">
                <span class="relative flex h-2 w-2">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                </span>
                v1.0.0 Stable Release
            </div>

            <h1
                class="hero-title text-4xl sm:text-5xl md:text-7xl font-black tracking-tight mb-4 sm:mb-6 bg-gradient-to-r from-zinc-900 via-primary to-accent bg-clip-text text-transparent">
                Build Faster with <br class="hidden sm:block" />
                YeMo APIs
            </h1>

            <p
                class="mt-4 sm:mt-6 text-base sm:text-lg md:text-xl text-zinc-600 max-w-2xl mx-auto leading-relaxed px-4">
                A high-performance, developer-first API collection tailored for modern applications. Free, open-source,
                and brutally efficient.
            </p>

            <div class="mt-8 sm:mt-10 flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4">
                <a href="#endpoints"
                    class="w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-3.5 bg-gradient-to-r from-primary to-accent text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all flex items-center justify-center gap-2">
                    Start Building <i class="fa-solid fa-arrow-right"></i>
                </a>
                <a href="/stats"
                    class="w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-3.5 bg-white text-zinc-900 font-bold border-2 border-zinc-200 rounded-xl hover:border-primary transition-all flex items-center justify-center gap-2">
                    <i class="fa-solid fa-chart-line"></i> System Status
                </a>
            </div>
        </div>
    </header>

    <main id="endpoints" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 w-full">

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8 mb-8 sm:mb-12">
            <div class="lg:col-span-2 group" data-aos="fade-right" data-aos-duration="600">
                <div class="relative">
                    <div
                        class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-zinc-400 group-focus-within:text-primary transition-colors">
                        <i class="fa-solid fa-magnifying-glass text-lg"></i>
                    </div>
                    <input type="text" id="searchInput"
                        class="block w-full pl-12 pr-4 py-3 sm:py-4 bg-white border-2 border-zinc-200 rounded-xl text-zinc-900 placeholder-zinc-400 focus:ring-4 focus:ring-primary/10 focus:border-primary transition-all font-medium text-sm sm:text-base shadow-sm"
                        placeholder="Search for endpoints...">
                    <div class="absolute inset-y-0 right-0 pr-4 flex items-center">
                        <kbd
                            class="hidden sm:inline-block px-2 py-1 text-xs font-mono font-bold text-zinc-400 bg-zinc-100 rounded border border-zinc-200">CTRL
                            K</kbd>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-primary to-accent text-white rounded-xl p-4 sm:p-6 shadow-xl flex items-center justify-between"
                data-aos="fade-left" data-aos-duration="600">
                <div>
                    <p class="text-white/80 text-xs font-bold uppercase tracking-wider mb-1">Available Endpoints</p>
                    <p class="text-2xl sm:text-3xl font-black" id="totalEndpoints">--</p>
                </div>
                <div
                    class="h-10 w-10 sm:h-12 sm:w-12 bg-white/20 rounded-lg flex items-center justify-center text-lg sm:text-xl backdrop-blur-sm">
                    <i class="fa-solid fa-bolt"></i>
                </div>
            </div>
        </div>

        <div id="apiList" class="space-y-8 sm:space-y-12"></div>

        <div id="noResults" class="hidden text-center py-16 sm:py-20">
            <div
                class="inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-zinc-100 rounded-full mb-4 sm:mb-6 text-2xl sm:text-3xl text-zinc-400">
                <i class="fa-solid fa-ghost"></i>
            </div>
            <h3 class="text-lg sm:text-xl font-bold mb-2">No endpoints found</h3>
            <p class="text-sm sm:text-base text-zinc-500">Try adjusting your search terms</p>
        </div>

    </main>

    <footer class="bg-white border-t border-zinc-200 mt-12 sm:mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8">
                <div class="col-span-1">
                    <div class="flex items-center gap-2 mb-4">
                        <div
                            class="w-8 h-8 bg-gradient-to-br from-primary to-accent rounded flex items-center justify-center text-white font-bold">
                            Y</div>
                        <span class="font-bold text-lg">YeMo-APIs</span>
                    </div>
                    <p class="text-sm text-zinc-500 leading-relaxed">
                        Open-source API infrastructure designed for speed, reliability, and ease of use.
                    </p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Platform</h4>
                    <ul class="space-y-2 text-sm text-zinc-500">
                        <li><a href="#" class="hover:text-primary transition-colors">Documentation</a></li>
                        <li><a href="/stats" class="hover:text-primary transition-colors">System Status</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors">Changelog</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Community</h4>
                    <ul class="space-y-2 text-sm text-zinc-500">
                        <li><a href="https://github.com/yemobyte/YeMo-APIs"
                                class="hover:text-primary transition-colors">GitHub</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors">Discord</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors">Twitter</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Legal</h4>
                    <ul class="space-y-2 text-sm text-zinc-500">
                        <li><a href="#" class="hover:text-primary transition-colors">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-primary transition-colors">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div
                class="border-t border-zinc-100 mt-8 sm:mt-12 pt-6 sm:pt-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                <p class="text-xs sm:text-sm text-zinc-400 font-medium text-center sm:text-left">Â© <span
                        id="year"></span> YeMo-APIs. All rights reserved.</p>
                <div class="flex items-center gap-4">
                    <span class="flex h-2 w-2 relative">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <span class="text-xs font-bold text-zinc-500 uppercase tracking-wide">All Systems Operational</span>
                </div>
            </div>
        </div>
    </footer>

    <div id="try-modal" class="fixed inset-0 z-50 hidden bg-black/60 backdrop-blur-sm items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden transform transition-all scale-100 opacity-100 border border-zinc-200"
            data-aos="zoom-in">
            <div
                class="flex items-center justify-between p-4 sm:p-6 border-b border-zinc-200 bg-gradient-to-r from-zinc-50 to-blue-50">
                <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 sm:gap-3 flex-wrap">
                        <span id="modal-method" class="text-xs font-bold px-2 py-1 rounded font-mono">GET</span>
                        <h3 id="modal-title" class="text-base sm:text-lg font-bold truncate">Endpoint Name</h3>
                    </div>
                </div>
                <button onclick="closeModal()"
                    class="ml-4 text-zinc-400 hover:text-zinc-900 transition-colors bg-zinc-100 hover:bg-zinc-200 p-2 rounded-lg flex-shrink-0"
                    aria-label="Close modal">
                    <i class="fa-solid fa-xmark text-lg"></i>
                </button>
            </div>

            <div class="p-4 sm:p-6 overflow-y-auto max-h-[calc(90vh-80px)]">
                <p id="modal-desc" class="text-zinc-600 mb-6 text-sm"></p>

                <form id="try-form" class="space-y-4 sm:space-y-5">
                    <div id="modal-params" class="space-y-4"></div>

                    <div class="pt-4">
                        <button type="submit"
                            class="w-full py-3 bg-gradient-to-r from-primary to-accent text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:scale-105 transition-all flex items-center justify-center gap-2">
                            <i class="fa-solid fa-play text-xs"></i> Execute Request
                        </button>
                    </div>
                </form>

                <div id="modal-response" class="hidden mt-6 sm:mt-8">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-xs font-bold text-zinc-500 uppercase tracking-wider">Response Body</h4>
                        <span
                            class="text-xs font-mono text-green-600 bg-green-50 px-2 py-0.5 rounded border border-green-200">200
                            OK</span>
                    </div>
                    <div class="relative group">
                        <pre
                            class="bg-zinc-900 text-zinc-100 p-3 sm:p-4 rounded-xl text-xs font-mono overflow-x-auto border border-zinc-800"><code id="response-code"></code></pre>
                        <button onclick="copyResponse()"
                            class="absolute top-2 sm:top-3 right-2 sm:right-3 p-2 bg-zinc-800 text-zinc-400 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:text-white hover:bg-zinc-700"
                            aria-label="Copy response">
                            <i class="fa-regular fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            once: false,
            duration: 800,
            offset: 50,
            easing: 'ease-out-cubic'
        });
        document.getElementById('year').textContent = new Date().getFullYear();

        let endpointsData = [];

        function toggleMenu() {
            const menu = document.getElementById('mobile-menu');
            const isOpen = !menu.classList.contains('translate-x-full');
            if (isOpen) {
                menu.classList.add('translate-x-full');
                document.body.style.overflow = '';
            } else {
                menu.classList.remove('translate-x-full');
                document.body.style.overflow = 'hidden';
            }
        }

        async function init() {
            try {
                const res = await fetch('/openapi.json');
                const data = await res.json();
                endpointsData = data.endpoints || [];

                document.getElementById('totalEndpoints').textContent = endpointsData.length;
                renderEndpoints(endpointsData);
            } catch (error) {
                console.error('Failed to load API data', error);
            }
        }

        function renderEndpoints(endpoints) {
            const list = document.getElementById('apiList');
            list.innerHTML = '';

            const categories = {};
            endpoints.forEach(ep => {
                const cat = ep.category || 'General';
                if (!categories[cat]) categories[cat] = [];
                categories[cat].push(ep);
            });

            if (Object.keys(categories).length === 0) {
                document.getElementById('noResults').classList.remove('hidden');
                return;
            } else {
                document.getElementById('noResults').classList.add('hidden');
            }

            let delay = 0;
            for (const [category, items] of Object.entries(categories)) {
                const section = document.createElement('div');
                section.className = 'bg-white rounded-2xl border border-zinc-200 p-4 sm:p-6 md:p-8 shadow-lg';
                section.setAttribute('data-aos', 'fade-up');
                section.setAttribute('data-aos-duration', '800');
                section.setAttribute('data-aos-delay', delay);
                delay += 100;

                let cardDelay = 0;
                let cardsHtml = items.map((ep, idx) => {
                    const methodClass = `method-${ep.methods[0]}`;
                    const statusDot = ep.status === 'online' ? 'bg-green-500' : 'bg-red-500';
                    const isOffline = ep.status !== 'online';
                    cardDelay += 50;

                    return `
                    <div class="endpoint-card p-4 sm:p-5 ${isOffline ? 'opacity-75 grayscale' : 'cursor-pointer'}" 
                         data-aos="fade-up"
                         data-aos-duration="600"
                         data-aos-delay="${cardDelay}"
                         onclick="${isOffline ? '' : `openTryModal('${category}', ${idx})`}">
                        <div class="flex justify-between items-start mb-3 sm:mb-4">
                            <span class="method-badge ${methodClass}">${ep.methods[0]}</span>
                            <div class="flex items-center gap-1.5">
                                <span class="h-2 w-2 rounded-full ${statusDot} ${ep.status === 'online' ? 'status-pulse' : ''}"></span>
                                <span class="text-[0.65rem] font-bold text-zinc-400 uppercase tracking-wide">${ep.status}</span>
                            </div>
                        </div>
                        <h3 class="font-bold text-zinc-900 mb-2 text-sm sm:text-base group-hover:text-primary transition-colors">${ep.name}</h3>
                        <div class="flex items-center gap-2 mb-2 sm:mb-3 overflow-x-auto">
                            <code class="text-xs bg-zinc-50 text-zinc-600 px-2 py-1 rounded-lg font-mono whitespace-nowrap border border-zinc-200">${ep.route}</code>
                        </div>
                        <p class="text-xs sm:text-sm text-zinc-500 line-clamp-2 leading-relaxed">${ep.description}</p>
                    </div>
                    `;
                }).join('');

                section.innerHTML = `
                    <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6 pb-4 border-b border-zinc-200">
                        <div class="h-8 sm:h-10 w-1 bg-gradient-to-b from-primary to-accent rounded-full"></div>
                        <h2 class="text-xl sm:text-2xl font-black tracking-tight">${category}</h2>
                        <span class="px-2.5 py-1 bg-gradient-to-r from-primary/10 to-accent/10 text-primary text-xs font-bold rounded-full border border-primary/20">${items.length}</span>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                        ${cardsHtml}
                    </div>
                `;
                list.appendChild(section);
            }
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = endpointsData.filter(ep =>
                ep.name.toLowerCase().includes(term) ||
                ep.route.toLowerCase().includes(term) ||
                ep.category.toLowerCase().includes(term)
            );
            renderEndpoints(filtered);
        });

        let currentEndpoint = null;

        function openTryModal(cat, idx) {
            const filtered = endpointsData.filter(ep => ep.category === cat);
            const ep = filtered[idx];
            currentEndpoint = ep;

            document.getElementById('modal-title').textContent = ep.name;
            document.getElementById('modal-method').textContent = ep.methods[0];
            document.getElementById('modal-method').className = `text-xs font-bold px-2 py-1 rounded font-mono method-${ep.methods[0]}`;
            document.getElementById('modal-desc').textContent = ep.description;
            document.getElementById('modal-response').classList.add('hidden');

            const paramsContainer = document.getElementById('modal-params');
            paramsContainer.innerHTML = '';

            const schema = ep.paramsSchema || {};
            const paramKeys = Object.keys(schema);

            if (paramKeys.length === 0) {
                paramsContainer.innerHTML = `
                    <div class="text-center py-6 bg-zinc-50 rounded-lg border-2 border-dashed border-zinc-200">
                        <p class="text-xs text-zinc-400 font-bold uppercase">No parameters required</p>
                    </div>
                `;
            } else {
                paramKeys.forEach(key => {
                    const conf = schema[key];
                    const div = document.createElement('div');
                    const requiredStar = conf.required ? '<span class="text-red-500">*</span>' : '';

                    let inputHtml = '';
                    if (conf.type === 'file') {
                        inputHtml = `
                        <input type="file" name="${key}" class="block w-full text-sm text-zinc-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-xs file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20 cursor-pointer border-2 border-zinc-200 rounded-lg bg-white" ${conf.required ? 'required' : ''}>
                        `;
                    } else {
                        inputHtml = `
                        <input type="text" name="${key}" class="w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-zinc-50 border-2 border-zinc-200 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all text-sm" placeholder="Enter value..." ${conf.required ? 'required' : ''}>
                        `;
                    }

                    div.innerHTML = `
                        <label class="block text-xs font-bold text-zinc-700 uppercase mb-1.5 ml-1">${key} ${requiredStar}</label>
                        ${inputHtml}
                    `;
                    paramsContainer.appendChild(div);
                });
            }

            document.getElementById('try-modal').classList.remove('hidden');
            document.getElementById('try-modal').classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('try-modal').classList.add('hidden');
            document.getElementById('try-modal').classList.remove('flex');
            document.body.style.overflow = '';
        }

        function copyResponse() {
            const code = document.getElementById('response-code').textContent;
            navigator.clipboard.writeText(code);
        }

        document.getElementById('try-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentEndpoint) return;

            const form = e.target;
            const formData = new FormData(form);
            const method = currentEndpoint.methods[0];
            let url = currentEndpoint.route;

            const btn = form.querySelector('button[type="submit"]');
            const originalBtnText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';

            try {
                const options = { method };

                if (method === 'GET') {
                    const params = new URLSearchParams(formData);
                    if (Array.from(params).length > 0) {
                        url += '?' + params.toString();
                    }
                } else {
                    const isFileUpload = form.querySelector('input[type="file"]');
                    if (isFileUpload) {
                        options.body = formData;
                    } else {
                        options.headers = { 'Content-Type': 'application/json' };
                        options.body = JSON.stringify(Object.fromEntries(formData));
                    }
                }

                const res = await fetch(url, options);
                let data;
                try {
                    data = await res.json();
                } catch (e) {
                    data = { error: 'Invalid JSON response', raw: await res.text() };
                }

                const codeBlock = document.getElementById('response-code');
                codeBlock.textContent = JSON.stringify(data, null, 2);
                document.getElementById('modal-response').classList.remove('hidden');

            } catch (err) {
                const codeBlock = document.getElementById('response-code');
                codeBlock.textContent = JSON.stringify({ error: err.message }, null, 2);
                document.getElementById('modal-response').classList.remove('hidden');
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
            }
        });

        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        init();
    </script>
</body>

</html>